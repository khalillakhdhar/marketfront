<div class="container">
  <form #productForm="ngForm">
    <div class="mb-3">
      <label for="name" class="form-label">Name</label>
      <input type="text" #name="ngModel" class="form-control" id="name" name="name" [(ngModel)]="product.name" required>
    <div *ngIf="name.invalid && (name.dirty || name.touched)" class="text-danger">
      <div *ngIf="name?.errors?.['required']">Name is required.</div>

      </div>

    </div>
<!-- description-->
    <div class="mb-3">
      <label for="description" class="form-label">Description</label>
      <textarea #description="ngModel" class="form-control" id="description" name="description" [(ngModel)]="product.description" required></textarea>
      <div *ngIf="description.invalid && (description.dirty || description.touched)" class="text-danger">
        <div *ngIf="description?.errors?.['required']">Description is required.</div>
      </div>
      </div>

    <div class="mb-3">
      <label for="price" class="form-label">Price</label>
      <input type="number" #price="ngModel" class="form-control" id="price" name="price" [(ngModel)]="product.price" required>
      <div *ngIf="price.invalid && (price.dirty || price.touched)" class="text-danger">
        <div *ngIf="price?.errors?.['required']">Price is required.</div>
      </div>
    </div>
    <!--stock-->
    <div class="mb-3">
      <label for="stock" class="form-label">Stock</label>
      <input type="number" #stock="ngModel" class="form-control" id="stock" name="stock" [(ngModel)]="product.stock" required>
      <div *ngIf="stock.invalid && (stock.dirty || stock.touched)" class="text-danger">
        <div *ngIf="stock?.errors?.['required']">Stock is required.</div>
      </div>
    </div>
    <!--category-->
    <div class="mb-3">
      <label for="category" class="form-label">Category</label>
      <select #category="ngModel" class="form-select" id="category" name="category" [(ngModel)]="product.category" required>
        <option value="">Select Category</option>
        <option *ngFor="let category of categories" [value]="category.id">{{category.name}}</option>
      </select>
      <div *ngIf="category.invalid && (category.dirty || category.touched)" class="text-danger">
        <div *ngIf="category?.errors?.['required']">Category is required.</div>
      </div>
    </div>
    <div class="mb-3">
      <label for="image" class="form-label">Image</label>
      <input type="file"  class="form-control" id="image" name="image"  required>

    </div>
    <div class="mb-3">
      <label for="stock" class="form-label">Quantit√© de stock</label>
      <input type="number" #stock="ngModel" class="form-control" id="stock" name="stock" [(ngModel)]="product.stock" required min="1">
      <div *ngIf="stock.invalid && (stock.dirty || stock.touched)" class="text-danger">
        <div *ngIf="stock?.errors?.['required']">Stock is required.</div>
        <div *ngIf="stock?.errors?.['min']">Stock must at least be 1.</div>
        </div>
    </div>
    <button type="submit" class="btn btn-primary" [disabled]="productForm.invalid">Submit</button>

  </form>
  <div class="table-responsive mt-4">
    <table class="table table-bordered">
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
          <th>Price</th>
          <th>Stock</th>
          <th>Category</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let product of products">
          <td>{{ product.name }}</td>
          <td>{{ product.description }}</td>
          <td>{{ product.price }}</td>
          <td>{{ product.stock }}</td>
          <td>{{ product.category }}</td>
          <td>
            <button class="btn btn-danger btn-sm" (click)="deleteProduct(product.id)">Delete</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
